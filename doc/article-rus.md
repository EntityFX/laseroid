# Портируем старую игру в жанре "shoot 'em up" в браузер

## Начинаем

Имеется древняя игрушка LaserAge, которая написана на Flash (на очень древнем Micromedia Flash 4) и работает только под Windows. В детстве она мне очень понравилась, поэтому я решил для души портировать её, чтобы можно было играть с браузера со всех устройств.

Суть игры заключается в том, чтобы уничтожать врагов своим космическим кораблём на различных уровнях и получать бонусы, если поймать бонус - улучшается оружие. При попадании торпеды врага - дайнгрейд оружия игрока.

## Оружие

Оружием обладает космический корабль игрока и кора,ли противника.
Оружие игрока может быть ручным (стреляет при нажатии мыши) и дополнительное автоматическое (стреляет периодами)

### Оружие космического корабля игрока

* Торпеда - стреляет рмаленькаими ракетами
  * Одинарная Торпеда - 1 уровень апгрейда
  * Двойная - 2 уровень апгрейда
  * Тройна - 3 уровень апгрейда
* Автоматические пушки
  * Дополнительная автоматическая Торпеда слева корабла - 4 уровень апгрейда
  * Дополнительная автоматическая Торпеда справа корабла - 5 уровень апгрейда
* Зелёная плазма - 6 и 7 уровень апгрейда (увеличивается скорострельность)
* Фиолетовая плазма - 8 уровень апгрейда (наносит урон всем врагам по траектории полёта)
* Зелёный лазер - 9 уровень (наносит урон всем врагам, а также активно одну секунду, тем самым можно задеть соседних врагов)

Дополнительное оружие:

* Красная плазма - 15-19  уровень (наносит урон всем врагам, а также активно одну секунду, тем самым можно задеть соседних врагов)
* Зелёная плазма - 20-24 уровень
* Синяя плазма - 25-29 уровень апгрейда
* Фиолетовая плазма - 30-34 уровень апгрейда
* Фиолетовая плазма - 30-34 уровень апгрейда
* Дополнительная автоматическая Торпеда слева стреляет желтой плазмой - 35 - 39 уровень апгрейда
* Дополнительная автоматическая Торпеда справа стреляет желтой плазмой - 40+ уровень апгрейда

Таблица с характеристиками оружия игрока

| Оружие                 | Hit Points | Скорость спрайта | Интенсивность | Тип     | Дополнительно                     |
| ---------------------- | ---------- | ---------------- | ------------- | ------- | --------------------------------- |
| Торпеда                | 1          | 5                | 25            | Торпеда | Одинарная, двойная, тройная       |
| Автоматическая Торпеда | 1          | 5                | 50            | Торпеда | Слева и Справа                    |
| Зелёная плазма         | 3          | 7                | 30            | Торпеда |                                   |
| Фиолетовая плазма      | 2          | 8                | 30            | Торпеда | Атакует до 3х целей               |
| Красная плазма         | 2          | 4                | 30            | Торпеда |                                   |
| Синяя плазма           | 4          | 4.5              | 30            | Торпеда |                                   |
| Жёлтая плазма          | 2          | 3.8              | 40            | Торпеда | Только автоматическая             |
| Зелёный Лазер          | 4          | -                | 15/55         | Лазер   | Атакует до 5ти целей одновременно |

Таблица с конфигурацей оружия игрока в зависимости от уровня жизни

| Уровень жизни | Конфигурация оружия                                                                           |
| ------------- | --------------------------------------------------------------------------------------------- |
| 1             | Торпеда                                                                                       |
| 2             | Торпеда + Торпеда                                                                             |
| 3             | Торпеда + Торпеда + Торпеда                                                                   |
| 4             | Торпеда + Торпеда + Торпеда + Автоматическая торпеда слева                                    |
| 5             | Торпеда + Торпеда + Торпеда + Автоматическая торпеда слева + справа                           |
| 6             | Зелёная плазма + Автоматическая торпеда слева + справа                                        |
| 7             | Зелёная плазма + Автоматическая торпеда слева + справа                                        |
| 8             | Фиолетовая плазма + Автоматическая торпеда слева + справа                                     |
| 9             | Зелёный лазер + Автоматическая торпеда слева + справа                                         |
| 15 - 19       | Зелёный лазер + Красная плазма + Автоматическая торпеда слева + справа                        |
| 20 - 24       | Зелёный лазер + Красная плазма + Автоматическая торпеда слева + справа                        |
| 25 - 29       | Зелёный лазер + Синяя плазма + Автоматическая торпеда слева + справа                          |
| 30 - 34       | Зелёный лазер + Фиолетовая плазма + Автоматическая торпеда слева + справа                     |
| 35 - 39       | Зелёный лазер + Фиолетовая плазма + Автоматическая желтая плазма слева + торпеда справа       |
| 40+           | Зелёный лазер + Фиолетовая плазма + Автоматическая желтая плазма слева + желтая плазма справа |

### Оружие врагов

Таблица с конфигурацей оружия врагов

| Оружие         | Скорость спрайта | Тип     |
| -------------- | ---------------- | ------- |
| Торпеда        | 2.5              | Торпеда |
| Красная плазма | 3.5              | Торпеда |
| Синяя плазма   | 4.5              | Торпеда |
| Зелёная плазма | 5                | Торпеда |
| Синяя Торпеда  | 3                | Торпеда |
| Жёлтая плазма  | 3.2 - 3.8        | Торпеда |
| Белая плазма   | 4 - 6            | Торпеда |
| Зелёный Лазер  | -                | Лазер   |

Для того чтобы исключить предсказуемость поведения оружия игроков, интенсивность имеет псевдослучайный характер.
Интенсивность оружия врагов может иметь один и более временных слотов, в каждом отдельно задаётся минимальное и максимальное время фреймов и число повторов. Слот может быть паузой или активным сотоянием (стреляет).

Пример конфигурации оружия:

```json
"torpedo": {
    "sprite": "Bullet1_1.png", //картинка спрайта
    "isRandomIntensity": false, //нужно ли переключать случайно слоты - true или по порядку - false
    "intensity": [
        //слот 0
        {
            "min": 50, //минимальное число фреймов
            "max": 200, //максимальное число фреймов
            "type": "pause" //pause - оружие неактивно, shoot - активное (стреляет)
        },
        //слот 1
        {
            "min": 100,
            "max": 200,
            "type": "shoot"
        },
        {
            "min": 50,
            "max": 80,
            "type": "pause"
        },
        {
            "min": 30,
            "max": 100,
            "repeat": 2
        }
    ],
    "speed": 2.5, //скорость
    "type": "bullet", //тип оружия
    "sound": "alienTorpedo"
}
```

## Враги

Для разнообразия на каждом уровне может быть различное число врагой, каждый из которых обладает собственным набором оружия, имеет своё значение жизни, различную траекторию движения. Враги могут быть обычные или боссами.

| Корабль врага           | Жизнь                    | Тип     | Алгоритм движения                               | Оружие                                                                                                                                                          |
| ----------------------- | ------------------------ | ------- | ----------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Чужой 1                 | 2                        | Обычный | Нормальное гризонтальное                        | Торпеда                                                                                                                                                         |
| Чужой 2                 | 4                        | Обычный | Нормальное все направления                      | Торпеда                                                                                                                                                         |
| Быстрый чужой           | 10                       | Обычный | Быстрое гризонтальное                           | Торпеда (Интенсивная)                                                                                                                                           |
| Фрегат чужого           | 10                       | Обычный | Нормально-быстрое все направления               | Красная плазма                                                                                                                                                  |
| Броневик чужого         | 10                       | Обычный | Медленное вниз                                  | Торпеда (Очень интенсивная)                                                                                                                                     |
| Мощный Фрегат чужого    | 30                       | Обычный | Медленное вниз (следит за игроком)              | Красная плазма   (Очень интенсивная)                                                                                                                            |
| Красный истребитель     | 30                       | Обычный | Медленное вниз (следит за игроком)              | Синяя плазма                                                                                                                                                    |
| Зелёный истребитель     | 30                       | Обычный | Быстро вертикально                              | Синяя плазма                                                                                                                                                    |
| Чужой 1 модификация     | 2                        | Обычный | Нормальное гризонтальное                        | Синяя Торпеда                                                                                                                                                   |
| Бомбардировщик          | 30                       | Обычный | Нормальное все направления  (следит за игроком) | Зелёная плазма                                                                                                                                                  |
| Тяжёлый Чужой           | 30                       | Обычный | Нормальное все направления                      | Торпеда                                                                                                                                                         |
| Тяжёлый Фрегат Чужого   | 35                       | Обычный | Нормальное все направления                      | Синяя Торпеда  + Синяя Торпеда                                                                                                                                  |
| Тяжёлый броневик        | 35                       | Обычный | Нормальное вниз                                 | Жёлтая Плазма + Жёлтая Плазма + Жёлтая Плазма + Жёлтая Плазма                                                                                                   |
| Линкор                  | 100                      | Босс    | Нормальное все направления                      | Синяя плазма (очень интенсивная) + Зелёная плазма (очень интенсивная)                                                                                           |
| Крейсер                 | 250                      | Босс    | Нормальное все направления                      | Зелёная плазма (сверх интенсивная)                                                                                                                              |
| Тяжёлый Крейсер         | 500                      | Босс    | Быстрое все направления                         | Жёлтая Плазма + Жёлтая Плазма + Синяя Торпеда + Синяя Торпеда + Синяя Торпеда + Синяя Торпеда + Белая плазма + Белая плазма                                     |
| Эпичный Тяжёлый Крейсер | 1000 (восстанавливается) | Босс    | Быстрое все направления                         | Жёлтая Плазма + Жёлтая Плазма + Синяя Торпеда + Синяя Торпеда + Синяя Торпеда + Синяя Торпеда + Белая плазма + Белая плазма+ Зелёная плазма (очень интенсивная) |

Конфигурация врага:

```json
"alien10": {
    "life": 35,
    "weapons": [
        {
            "weapon": "blueTorpedo",
            "position": {
                "x": -6,
                "y": 0
            }
        },
        {
            "weapon": "blueTorpedo",
            "position": {
                "x": 6,
                "y": 0
            }
        }
    ],
    "sprite": "AlienShip10_1.png",
    "movement": "horizontalFast",
    "killPoints": 2100
}
```

Конфигурация движения врага :

```json
"horizontalFast": {
    "movements": [
        {
            "type": "freeMovement", //freeMovement - обычное, followPlayer - следит за игроком (движется в направление)
            "speedDelta": {
                "vx": -6,
                "vy": 0
            },
            "intensity": [ //интенсивность движения в виде слотов
                {
                    "min": 20,
                    "max": 150
                },
                {
                    "min": 150,
                    "max": 350
                }
            ]
        }
    ]
}
```
